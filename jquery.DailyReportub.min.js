function dailyReportub(a){let date=new Date();let year=date.getFullYear();let month=date.getMonth();initDailyReportub(a,year,month);$("#drhubPrevMonth").on("click",function(){if((--month)===-1){month=11;year--}setDailyReportub(a,year,month)});$("#drhubNextMonth").on("click",function(){if((++month)===12){month=0;year++}setDailyReportub(a,year,month)})}function initDailyReportub(a,c,d){if(!("width" in a)||(isNaN(a.width))||(parseInt(a.width)<200)){a.width=200}if(!("height" in a)||(isNaN(a.height))||(parseInt(a.height)<200)){a.height=200}if(!("fontColor" in a)||(!isString(a.fontColor))||(a.fontColor==="")){a.fontColor="#000"}if(!("borderColor" in a)||(!isString(a.borderColor))||(a.borderColor==="")){a.borderColor="#ccc"}if(!("backgroundColor" in a)||(!isString(a.backgroundColor))||(a.backgroundColor==="")){a.backgroundColor="transparent"}if(!("grassColor" in a)||(!isString(a.grassColor))||(a.grassColor==="")){a.grassColor="#0f0"}let header='<div id="drhubHeader"><button id="drhubPrevMonth">◀</button><span id="drhubHeader_mid">'+c+" / "+(d+1)+'</span><button id="drhubNextMonth">▶</button></div>'$("#DailyReportub").append(header);$("#DailyReportub").css({width:a.width+"px",height:a.height+"px","background-color":a.backgroundColor});let body='<div id="drhubBody"></div>'$("#DailyReportub").append(body);setDailyReportub(a,c,d)}function setDailyReportub(a,c,d){let date=new Date()$("#drhubHeader_mid").html(c+" / "+(d+1));$("#drhubBody").empty();let elem=""let daysList=["日","月","火","水","木","金","土"]date.setFullYear(c);date.setMonth(2);date.setDate(0);let monthDatesList=[31,date.getDate(),31,30,31,30,31,31,30,31,30,31]date.setMonth(d);date.setDate(1);let startDayIndex=date.getDay()let weekRowCnt=Math.ceil((startDayIndex+monthDatesList[d])/7)+1let dateList=new Array(7*(weekRowCnt-1))dateList.fill("");for(let i=0;i<(startDayIndex+monthDatesList[d]);i++){if(i<startDayIndex){continue}dateList[i]=String(i-startDayIndex+1)}for(let i=0;i<weekRowCnt;i++){elem='<div id="drhubRow_'+i+'" class="drhubRow"></div>';$("#drhubBody").append(elem);for(let j=0;j<7;j++){if(i===0){elem='<span class="drhubCell">'+daysList[j]+"</span>";$("#drhubRow_"+i).append(elem)}if(0<i){let dateIndex=(i-1)*7+jelem='<span id="drhubCell_'+(dateIndex)+'" class="drhubCell">'+dateList[dateIndex]+"</span>";$("#drhubRow_"+i).append(elem);let iventsKey=c+"/"+(d+1)+"/"+dateList[dateIndex]if(iventsKey in a.ivents){$("#drhubCell_"+dateIndex).addClass("hasTooltip");$("#drhubCell_"+dateIndex).append('<span class="tooltip"><p class="tooltipText"></p></span>');let iventsCnt=a.ivents[iventsKey].lengthelem="";for(let k=0;k<iventsCnt;k++){elem+=a.ivents[iventsKey][k]+"<br>"}$("#drhubCell_"+dateIndex+">.tooltip>.tooltipText").append(elem);let rgb=hex2rgb(a.grassColor)let blurRate=(iventsCnt>=4)?0:iventsCntblurRate=blurRate*0.25;$("#drhubCell_"+dateIndex).css({"background-color":"rgba("+rgb.r+","+rgb.g+","+rgb.b+","+blurRate+")"})}date=new Date();let today=date.getFullYear()+"/"+(date.getMonth()+1)+"/"+date.getDate()if(iventsKey===today){$("#drhubCell_"+dateIndex).addClass("drhubToday")}}}}let rowHeight=Math.round(a.height*0.85/weekRowCnt)$(".drhubRow").css({height:rowHeight+"px"});let cellWidth=Math.floor(a.width/7)-6$(".drhubCell").css({width:cellWidth+"px",border:"1px solid "+a.borderColor});$("#DailyReportub").css({color:a.fontColor})}function isString(a){return((typeof(a)=="string")||(a instanceof String))}function hex2rgb(a){if(a.slice(0,1)==="#"){a=a.slice(1)}if(a.length===3){a=a.slice(0,1)+a.slice(0,1)+a.slice(1,2)+a.slice(1,2)+a.slice(2,3)+a.slice(2,3)}let r=parseInt(a.slice(0,2),16)let g=parseInt(a.slice(2,4),16)let b=parseInt(a.slice(4,6),16)return{r:r,g:g,b:b}};